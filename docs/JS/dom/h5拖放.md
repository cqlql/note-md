## å…ƒç´ å¯æ‹–æ”¾è®¾ç½®

```html
<li draggable="true"><img src="1.png" alt="" draggable="false" /><p>å°5</p></li>
```

## ç›¸å…³äº‹ä»¶ï¼š

- æ‹–åŠ¨å…ƒç´ æ³¨å†Œ
  - dragstartï¼šå¼€å§‹æ‹–æ”¾
  - dragendï¼šæ‹–æ”¾ç»“æŸ
- å®¹å™¨æ³¨å†Œ
  - drop: å®¹å™¨ä¸Šæ”¾ä¸‹
  - dragenter: æ‹–è¿›å®¹å™¨
  - dragleave: æ‹–ç¦»å®¹å™¨
  - dragenter: å®¹å™¨ä¸Šæ‹–åŠ¨ åå¤è§¦å‘

## DragEvent éƒ¨åˆ†ä½¿ç”¨

```js
// æ‹–åŠ¨å…ƒç´ ä¸­è®¾ç½®
e.dataTransfer.setData('text', this.innerHTML)

// å®¹å™¨ä¸­è·å–
var text = e.dataTransfer.getData('text')
```

### æ›´æ”¹æŒ‡é’ˆ

```js
// dragstart äº‹ä»¶ä¸­è®¾ç½®
e.dataTransfer.effectAllowed = 'copyMove'
```

## åŸºæœ¬ä½¿ç”¨ä¾‹å­

```ts
///// æ‹–åŠ¨å…ƒç´ æ³¨å†Œ
eItem.addEventListener('dragstart', (e: DragEvent) => {
  ;(e.target as HTMLDivElement).classList.add('dragging')
  e.dataTransfer!.effectAllowed = 'copyMove'
  console.log('ğŸš€ -- eItem.addEventListener -- :', 'å¼€å§‹æ‹–æ”¾')
})
eItem.addEventListener('dragend', (e) => {
  ;(e.target as HTMLDivElement).classList.remove('dragging')
  console.log('ğŸš€ -- eItem.addEventListener -- :', 'æ‹–æ”¾ç»“æŸ')
})

///// å®¹å™¨æ³¨å†Œè§¦å‘
eItem.addEventListener('drop', () => {
  console.log('ğŸš€ -- eItem.addEventListener -- :', 'å®¹å™¨ä¸Šæ”¾ä¸‹')
})
eItem.addEventListener('dragleave', () => {
  console.log('ğŸš€ -- eItem.addEventListener -- :', 'æ‹–ç¦»å®¹å™¨')
})
eItem.addEventListener('dragenter', (e) => {
  console.log('ğŸš€ -- eItem.addEventListener -- :', 'æ‹–è¿›å®¹å™¨', e)
})
eItem.addEventListener('dragover', (e) => {
  // å®¹å™¨ä¸Šæ‹–åŠ¨æ—¶è§¦å‘ï¼Œå¹¶ä¸”åå¤è§¦å‘

  // è¿™ä¸ªåˆ¤æ–­æ˜¯å¤„ç†ï¼Œå¦‚æœæ‹–åŠ¨çš„æ˜¯è‡ªå·±ï¼Œå°±ä¸å‡ºç°åŠ å·å›¾æ ‡
  if (!(e.target as HTMLDivElement).classList.contains('dragging')) {
  }
  // åŠ äº†è¿™ä¸ªæ‰æœ‰æŒ‡é’ˆåŠ å·å›¾æ ‡
  e.preventDefault()

  console.log('ğŸš€ -- eItem.addEventListener -- :', 'å®¹å™¨ä¸Šæ‹–åŠ¨ åå¤è§¦å‘')
})
```

## å‚è€ƒæ–‡æ¡£

[HTML5 Drag Api æ€»ç»“](https://zhuanlan.zhihu.com/p/394013628)

[MDN æ–‡æ¡£å‚è€ƒ](https://developer.mozilla.org/en-US/docs/Web/Events/drag)
